<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Resurs Bank AB. All rights reserved.
 * See LICENSE for license details.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <section id="payment">
            <group id="resursbank_section" sortOrder="0" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Resurs Bank</label>
                <group id="resursbank" sortOrder="0" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                    <fieldset_css>complex resursbank-section</fieldset_css>
                    <frontend_model>Magento\Paypal\Block\Adminhtml\System\Config\Fieldset\Payment</frontend_model>
                    <label>
                        <![CDATA[<div class="resursbank-payment-logo"></div>]]>
                    </label>
                    <group id="api" type="text" sortOrder="0" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Resurs Bank API</label>
                        <field id="environment" type="select" sortOrder="1" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Environment</label>
                            <source_model>Resursbank\Core\Model\Config\Source\Environment</source_model>
                            <config_path>resursbank/api/environment</config_path>
                        </field>
                        <field id="username_1" type="text" sortOrder="2" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Username</label>
                            <depends><field id="environment">1</field></depends>
                            <config_path>resursbank/api/username_1</config_path>
                        </field>
                        <field id="password_1" type="password" sortOrder="3" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Password</label>
                            <depends><field id="environment">1</field></depends>
                            <config_path>resursbank/api/password_1</config_path>
                        </field>
                        <field id="username_0" type="text" sortOrder="2" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Username</label>
                            <depends><field id="environment">0</field></depends>
                            <config_path>resursbank/api/username_0</config_path>
                        </field>
                        <field id="password_0" type="password" sortOrder="3" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Password</label>
                            <depends><field id="environment">0</field></depends>
                            <config_path>resursbank/api/password_0</config_path>
                        </field>
                        <field id="debug" type="select" sortOrder="4" translate="label, comment" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Debug enabled</label>
                            <comment>Log entries will be stored in var/log/resursbank_*.log (different log files are used for various operations).</comment>
                            <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                            <config_path>resursbank/api/debug</config_path>
                        </field>
                        <field id="round_tax_percentage" type="select" sortOrder="5" translate="label, comment" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Round Item Tax</label>
                            <comment>Round item tax percentage to nearest integer. Only use this when your configuration results in floating tax percentage values, for instance when using percentage based shipping fees in combination with currency conversion.</comment>
                            <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                            <config_path>resursbank/api/round_tax_percentage</config_path>
                        </field>
                    </group>
                    <group id="methods" sortOrder="1" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Payment Methods</label>
                        <field id="sync" type="button" sortOrder="0" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Sync payment methods from Resurs Bank</label>
                            <frontend_model>Resursbank\Core\Block\Adminhtml\System\Config\Methods\Sync</frontend_model>
                            <config_path>resursbank/methods/sync</config_path>
                        </field>
                        <field id="auto_sync_method" type="select" sortOrder="1" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Automatically sync payment methods</label>
                            <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                            <config_path>resursbank/methods/auto_sync_method</config_path>
                        </field>
                        <field id="listing" sortOrder="2" showInDefault="1" showInWebsite="1" showInStore="1">
                            <frontend_model>Resursbank\Core\Block\Adminhtml\System\Config\Methods\Listing</frontend_model>
                            <config_path>resursbank/methods/listing</config_path>
                        </field>
                    </group>
                    <group id="advanced" sortOrder="2" translate="label" showInDefault="1" showInWebsite="1" showInStore="1">
                        <label>Advanced Settings</label>
                        <field id="reuse_erroneously_created_orders" translate="label, comment" type="select" sortOrder="4" showInDefault="1" showInWebsite="1" showInStore="1">
                            <label>Reuse Erroneously Created Orders</label>
                            <comment>
                                There is a chance a canceled order will be created if
                                an error occurs during the order placement process. If
                                subsequent errors occurs, this can quickly lead to the
                                system being flooded with canceled orders. With this
                                setting enabled, a canceled order (created due to an
                                error) will be reused if possible.
                            </comment>
                            <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                            <config_path>resursbank/advanced/reuse_erroneously_created_orders</config_path>
                        </field>
                    </group>
                </group>
            </group>
        </section>
    </system>
</config>
